<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>datawhispers.datavis &#8212; DataWhispers 00.00.01 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=ce80abac"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for datawhispers.datavis</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">display</span>

<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">chi2_contingency</span><span class="p">,</span> <span class="n">ttest_ind</span><span class="p">,</span> <span class="n">pearsonr</span>

<span class="c1"># Korrelationstabellenerstellung #</span>

<div class="viewcode-block" id="Correlation_table"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.Correlation_table">[docs]</a><span class="k">def</span> <span class="nf">Correlation_table</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [numerisch] - [numerisch]\n</span>
<span class="sd">    Stellt die stärksten Korrelationen zwischen intervallskalierten Variablen sortiert visuell dar.\n </span>
<span class="sd">    Größeres p --&gt; Größere Abhängigkeit</span>
<span class="sd">    @Variabel df: Zugehöriges DataFrame</span>
<span class="sd">    @Variabel max: Maximale Anzahl der Korrelationen</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|               Korrelationstabelle              |&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    
    <span class="n">correlations</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">:</span>
            
            <span class="k">for</span> <span class="n">othervar</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">)):</span>        
                    <span class="n">correlation</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                    <span class="n">correlations</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">),</span><span class="n">correlation</span><span class="p">,</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">correlations</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">heights</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">if</span> <span class="nb">max</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">correlations</span><span class="p">):</span>
        <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">correlations</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
        <span class="n">correlation</span><span class="o">=</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">correlation</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">correlation</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        
    <span class="n">figure</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)),</span><span class="n">height</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span><span class="n">tick_label</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
    <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pearson Correlation p&quot;</span><span class="p">);</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
    
    

<div class="viewcode-block" id="Correlation_analysis_all"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.Correlation_analysis_all">[docs]</a><span class="k">def</span> <span class="nf">Correlation_analysis_all</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|               Korrelationsanalyse              |&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">:</span>
            
            <span class="k">for</span> <span class="n">othervar</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="p">((</span><span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">)):</span> 
                    <span class="n">correlation</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;Pearsons Rho </span><span class="se">\u03C1</span><span class="s2"> = &quot;</span><span class="p">,</span><span class="nb">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">))</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">)</span><span class="o">&gt;</span><span class="mf">0.2</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;!!!!Statistische Abhängigkeit!!!!&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">()</span>
                    <span class="n">figure</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="n">df</span><span class="p">[</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="n">s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> vs. </span><span class="si">{</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
<span class="c1"># T-Test #</span>

<div class="viewcode-block" id="T_Test"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.T_Test">[docs]</a><span class="k">def</span> <span class="nf">T_Test</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">Zielvariable</span><span class="p">,</span> <span class="n">Zielvariable_Wert_gut</span><span class="p">,</span> <span class="n">Zielvariable_Wert_schlecht</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [metrisch] - [kategorisch]\n</span>
<span class="sd">    Stellt die unterschiedlichen stat. Abhängigkeiten mit Mittelwert und Standardabweichung visuell dar</span>
<span class="sd">    @Zielvariable: Nur zwei Ausprägungen</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|                     T-Test                     |&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    
    <span class="n">subset_good</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">Zielvariable</span><span class="p">]</span><span class="o">==</span><span class="n">Zielvariable_Wert_gut</span><span class="p">]</span>
    <span class="n">subset_bad</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">Zielvariable</span><span class="p">]</span><span class="o">==</span><span class="n">Zielvariable_Wert_schlecht</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">testvar</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">:</span>
            <span class="n">tval</span><span class="p">,</span><span class="n">pval</span><span class="o">=</span><span class="n">ttest_ind</span><span class="p">(</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">],</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">testvar</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">t =&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">tval</span><span class="p">)),</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">p =&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pval</span><span class="p">),</span><span class="n">pval</span><span class="p">)</span>
            
            <span class="n">figure</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
            <span class="n">heights</span><span class="o">=</span><span class="p">[</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span>
            <span class="n">stds</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()]]</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Zielvariable_Wert_gut</span><span class="p">,</span><span class="s2">&quot;: &quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03bc</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> &quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">heights</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03C3</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> </span><span class="se">\u00B1</span><span class="s2">&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Zielvariable_Wert_schlecht</span><span class="p">,</span><span class="s2">&quot;: &quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03bc</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> &quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">heights</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03C3</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> </span><span class="se">\u00B1</span><span class="s2">&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>      
            <span class="n">axis</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)),</span><span class="n">height</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span><span class="n">tick_label</span><span class="o">=</span><span class="p">[</span><span class="n">Zielvariable_Wert_gut</span><span class="p">,</span> <span class="n">Zielvariable_Wert_schlecht</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span><span class="n">yerr</span><span class="o">=</span><span class="n">stds</span><span class="p">,</span><span class="n">ecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">capsize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">testvar</span><span class="si">}</span><span class="s2"> vs. </span><span class="si">{</span><span class="n">Zielvariable</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Durchschnitt </span><span class="si">{</span><span class="n">testvar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Zielvariable</span><span class="p">);</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<span class="c1"># chi2 - Test #</span>

<div class="viewcode-block" id="chi_square_einzeln"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.chi_square_einzeln">[docs]</a><span class="k">def</span> <span class="nf">chi_square_einzeln</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">Zielvariable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [kategorisch] - [kategorisch]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">contingencyTable</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">varname</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="n">Zielvariable</span><span class="p">])</span>
    <span class="n">chi2</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">dof</span><span class="p">,</span><span class="n">expectedFreq</span><span class="o">=</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pval</span><span class="o">&lt;</span><span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span><span class="s2">&quot;--&quot;</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="s2">&quot;chi2=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">),</span><span class="s2">&quot;p=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pval</span><span class="p">),</span><span class="s2">&quot;dof=&quot;</span><span class="p">,</span><span class="n">dof</span><span class="p">)</span><span class="c1">#show pval in non-scienetific expression</span>
        <span class="c1">#print(&quot;expected values\n&quot;,expectedFreq)</span>
        <span class="c1">#print(contingencyTable)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Es gibt keinen stat. Zusammenhang p&gt;0.05 bei </span><span class="si">{</span><span class="n">varname</span><span class="si">}</span><span class="s2"> --&gt; p=</span><span class="si">{</span><span class="n">pval</span><span class="si">}</span><span class="s2">;chi2=</span><span class="si">{</span><span class="n">chi2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">contingencyTable</span></div>

<div class="viewcode-block" id="chi_square_einzeln_mit_Erwartungswerten"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.chi_square_einzeln_mit_Erwartungswerten">[docs]</a><span class="k">def</span> <span class="nf">chi_square_einzeln_mit_Erwartungswerten</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">Zielvariable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [kategorisch] - [kategorisch]\n</span>
<span class="sd">    Mit Tabelle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">contingencyTable</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">varname</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="n">Zielvariable</span><span class="p">])</span>
    <span class="n">chi2</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">dof</span><span class="p">,</span><span class="n">expectedFreq</span><span class="o">=</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pval</span><span class="o">&lt;</span><span class="mf">0.05</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span><span class="s2">&quot;--&quot;</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03C7\u00B2</span><span class="s2">=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">),</span><span class="s2">&quot;p=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pval</span><span class="p">),</span><span class="s2">&quot;dof=&quot;</span><span class="p">,</span><span class="n">dof</span><span class="p">)</span><span class="c1">#show pval in non-scienetific expression</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;expected values</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">expectedFreq</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Es gibt keinen stat. Zusammenhang p&gt;0.05 bei </span><span class="si">{</span><span class="n">varname</span><span class="si">}</span><span class="s2"> --&gt; p=</span><span class="si">{</span><span class="n">pval</span><span class="si">}</span><span class="s2"> </span><span class="se">\u03C7\u00B2</span><span class="s2">=</span><span class="si">{</span><span class="n">chi2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">contingencyTable</span></div>

<div class="viewcode-block" id="chi_square_all"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.chi_square_all">[docs]</a><span class="k">def</span> <span class="nf">chi_square_all</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">Zielvariable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    [kategorisch] - [kategorisch]\n</span>
<span class="sd">    Erstellt alle möglichen chi2-Werte und p werte\n</span>
<span class="sd">    p&lt;0.05 und chi2 sehr groß --&gt; Signifikant</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|                   Chi² - Test                  |&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;object&quot;</span> <span class="ow">and</span> <span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="n">Zielvariable</span><span class="p">:</span>
            <span class="n">chi_square_einzeln_mit_Erwartungswerten</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Zielvariable</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="mi">30</span><span class="o">*</span><span class="s2">&quot;---&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Analyse"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.Analyse">[docs]</a><span class="k">def</span> <span class="nf">Analyse</span><span class="p">(</span><span class="n">df</span><span class="p">:</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">:</span><span class="nb">str</span> <span class="p">,</span><span class="n">Zielvariable_gut</span><span class="p">,</span><span class="n">Zielvariable_schlecht</span><span class="p">,</span><span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Eine rundumanalyse eines Datensatzes in statistischer Form\n</span>
<span class="sd">    Beachte, dass die Zielvariable kategorisch sein sollte, wenn nicht benutzte .map um es einzufügen</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   --------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   |                     Analyse                    |&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   --------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="n">Correlation_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="nb">max</span><span class="p">)</span> <span class="c1"># Numerische Korrelationen</span>
    <span class="c1">#time.sleep(0.5)</span>
    <span class="n">Correlation_analysis_all</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="c1"># Grafiken zu numerischen Korrelationen</span>
    <span class="n">T_Test</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">,</span><span class="n">Zielvariable_gut</span><span class="p">,</span><span class="n">Zielvariable_schlecht</span><span class="p">)</span> <span class="c1"># Numerisch - Kategorischen Korrelationen</span>
    <span class="n">chi_square_all</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">Zielvariable</span><span class="p">)</span> <span class="c1"># Kategorisch - Kategorisch Korrelationen</span></div>
    
<div class="viewcode-block" id="make_scatter_plot"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.make_scatter_plot">[docs]</a><span class="k">def</span> <span class="nf">make_scatter_plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="p">,</span><span class="n">title</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s2">&quot;fig.png&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Outputs a scatter plot</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        x: array with x-values</span>
<span class="sd">        y: array with y-values</span>
<span class="sd">        xticks (optional): list with values to use as x-ticks</span>
<span class="sd">        yticks (optional): list with values to use as y-ticks</span>
<span class="sd">        xlabel (optional): str with xlabel</span>
<span class="sd">        ylabel (optional): str with ylabel</span>
<span class="sd">        title (optional): str with title</span>
<span class="sd">        color (optional): str or tuple consisting of rgb values for color</span>
<span class="sd">        filename (optional): str with filename or path + filename</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        Outputs the graph and saves it</span>
<span class="sd">        </span>
<span class="sd">    Raises:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">figure</span><span class="p">,</span><span class="n">axes</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">),</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
           
    <span class="n">axes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="p">);</span>

    <span class="n">axes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">);</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>    

    <span class="c1">#plt.xticks(rotation=&quot;vertical&quot;)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,);</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>    </div>

<div class="viewcode-block" id="DataVisAnalyse"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse">[docs]</a><span class="k">class</span> <span class="nc">DataVisAnalyse</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">df</span><span class="p">,</span> <span class="n">classification_column</span><span class="p">,</span> <span class="n">good</span><span class="p">,</span> <span class="n">bad</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates Statistical Analysis (x2, pearson and student_t) </span>

<span class="sd">        Args:</span>
<span class="sd">            df (pd.DataFrame): your DataFrame</span>
<span class="sd">            classification_column (str): column name as string</span>
<span class="sd">            good (str): good value</span>
<span class="sd">            bad (str): bad value    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span> <span class="o">=</span> <span class="n">classification_column</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">good</span> <span class="o">=</span> <span class="n">good</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bad</span> <span class="o">=</span> <span class="n">bad</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dfStats</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;Konventionen:</span>
<span class="s2">              1. import datavis as dv</span>
<span class="s2">              2. analyser = dv.DataVisAnalyse(df:pd.DataFrame, classification_column:str, good:str, bad:str) </span>
<span class="s2">              3. analyser.get_most_relevant(list_with_columns_to_ignore:list, features_to_inspect:int=5)</span>
<span class="s2">              4. analyser.get_corr_table()</span>
<span class="s2">              5. for each column analyser.get_chi2(column_name, df:None) # uses df provided in dv.DataVisAnalyse if df is None</span>
<span class="s2">              6. analyser.getT_Test(df:None)</span>
<span class="s2">              </span>
<span class="s2">              or </span>
<span class="s2">              1. import datavis as dv</span>
<span class="s2">              2. analyser = dv.DataVisAnalyse(df:pd.DataFrame, classification_column:str, good:str, bad:str) </span>
<span class="s2">              3. analyser.get_all()</span>
<span class="s2">              &quot;&quot;&quot;</span><span class="p">)</span>
    
<div class="viewcode-block" id="DataVisAnalyse.get_most_relevant"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_most_relevant">[docs]</a>    <span class="k">def</span> <span class="nf">get_most_relevant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a df with most relevant variables</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            ignore (list): list with column_names which to ignore</span>
<span class="sd">            n (int): features to inspect</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dfGood</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">]</span>
        <span class="n">dfBad</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">]</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">]</span>
        <span class="n">statistics</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">dataType</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
            <span class="c1">#print(&quot;var&quot;,var,&quot;as&quot;,dataType)</span>
            <span class="k">if</span> <span class="n">dataType</span><span class="o">==</span><span class="s2">&quot;object&quot;</span><span class="p">:</span>
                <span class="c1">#X²-Test</span>
                <span class="n">dfContingencyTable</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">])</span>
                <span class="n">chi2</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">dof</span><span class="p">,</span><span class="n">exp</span><span class="o">=</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">dfContingencyTable</span><span class="p">)</span>
                <span class="c1">#print(&quot;chi2&quot;,self.nice(chi2),&quot;p&quot;,self.nice(p))</span>
                <span class="n">statistics</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">var</span><span class="p">,</span><span class="s2">&quot;X²&quot;</span><span class="p">,</span><span class="n">chi2</span><span class="p">,</span><span class="n">p</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#Student-Test</span>
                <span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">ttest_ind</span><span class="p">(</span><span class="n">dfBad</span><span class="p">[</span><span class="n">var</span><span class="p">],</span><span class="n">dfGood</span><span class="p">[</span><span class="n">var</span><span class="p">])</span>
                <span class="c1">#print(&quot;t&quot;,self.nice(t),&quot;p&quot;,self.nice(p))</span>
                <span class="n">statistics</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">var</span><span class="p">,</span><span class="s2">&quot;t&quot;</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">])</span>
        <span class="n">dfStatistics</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">statistics</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span><span class="s2">&quot;stat&quot;</span><span class="p">,</span><span class="s2">&quot;p&quot;</span><span class="p">])</span>    
        <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>
        <span class="n">dfStatistics</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;p&quot;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">dfStatistics</span><span class="p">[</span><span class="n">dfStatistics</span><span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">]</span><span class="o">.</span><span class="n">to_html</span><span class="p">()))</span> 
        <span class="k">return</span> <span class="n">dfStatistics</span><span class="p">[</span><span class="n">dfStatistics</span><span class="p">[</span><span class="s2">&quot;p&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">]</span>    </div>
        
<div class="viewcode-block" id="DataVisAnalyse.nice"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.nice">[docs]</a>    <span class="k">def</span> <span class="nf">nice</span><span class="p">(</span><span class="n">aValue</span><span class="p">):</span> <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">aValue</span><span class="p">)</span>    </div>
    
<div class="viewcode-block" id="DataVisAnalyse.get_prcnt_diff"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_prcnt_diff">[docs]</a>    <span class="k">def</span> <span class="nf">get_prcnt_diff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val1</span><span class="o">&gt;=</span><span class="n">val2</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">val2</span><span class="o">/</span><span class="n">val1</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">val1</span><span class="o">/</span><span class="n">val2</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span></div>
    
    
<div class="viewcode-block" id="DataVisAnalyse.get_corr_table"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_corr_table">[docs]</a>    <span class="k">def</span> <span class="nf">get_corr_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">max</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[numerisch] - [numerisch]\n</span>
<span class="sd">        Stellt die stärksten Korrelationen zwischen intervallskalierten Variablen sortiert visuell dar.\n </span>
<span class="sd">        Größeres p --&gt; Größere Abhängigkeit</span>
<span class="sd">        @Variabel df: Zugehöriges DataFrame</span>
<span class="sd">        @Variabel max: Maximale Anzahl der Korrelationen</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|               Korrelationstabelle              |&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span>
        <span class="n">correlations</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">var</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">:</span>
                
                <span class="k">for</span> <span class="n">othervar</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                        <span class="k">break</span>
                    <span class="k">if</span> <span class="p">((</span><span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">othervar</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">)):</span>        
                        <span class="n">correlation</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">correlations</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">correlation</span><span class="p">),</span><span class="n">correlation</span><span class="p">,</span><span class="n">var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;-&quot;</span><span class="o">+</span><span class="n">othervar</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="n">correlations</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">heights</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="nb">max</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">correlations</span><span class="p">):</span>
            <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">correlations</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
            <span class="n">correlation</span><span class="o">=</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">correlation</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">correlation</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="c1">#print(correlations)    </span>
        <span class="n">figure</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)),</span><span class="n">height</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span><span class="n">tick_label</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pearson Correlation p&quot;</span><span class="p">);</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
    
    
    
<div class="viewcode-block" id="DataVisAnalyse.get_chi2"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_chi2">[docs]</a>    <span class="k">def</span> <span class="nf">get_chi2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">varname</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [kategorisch] - [kategorisch]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span>
        <span class="n">contingencyTable</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">varname</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">])</span>
        <span class="n">chi2</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">dof</span><span class="p">,</span><span class="n">expectedFreq</span><span class="o">=</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pval</span><span class="o">&lt;</span><span class="mf">0.05</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">varname</span><span class="p">,</span><span class="s2">&quot;--&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="s2">&quot;chi2=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chi2</span><span class="p">),</span><span class="s2">&quot;p=&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pval</span><span class="p">),</span><span class="s2">&quot;dof=&quot;</span><span class="p">,</span><span class="n">dof</span><span class="p">)</span><span class="c1">#show pval in non-scienetific expression</span>
            <span class="c1">#print(&quot;expected values\n&quot;,expectedFreq)</span>
            <span class="n">expectedFreq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">expectedFreq</span><span class="p">)</span>
            <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;exptected</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expectedFreq</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;exptected</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expectedFreq</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">diffs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_prcnt_diff</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;exptected</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">]))]</span>
            <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;procentualDifference</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">diffs</span>
            <span class="n">diffs</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_prcnt_diff</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;exptected</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">contingencyTable</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">]))]</span>
            <span class="n">contingencyTable</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;procentualDifference</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">diffs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Es gibt keinen stat. Zusammenhang p&gt;0.05 bei </span><span class="si">{</span><span class="n">varname</span><span class="si">}</span><span class="s2"> --&gt; p=</span><span class="si">{</span><span class="n">pval</span><span class="si">}</span><span class="s2">;chi2=</span><span class="si">{</span><span class="n">chi2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="n">contingencyTable</span><span class="o">.</span><span class="n">to_html</span><span class="p">()))</span>    
        <span class="k">return</span> <span class="n">contingencyTable</span></div>
    
    
<div class="viewcode-block" id="DataVisAnalyse.get_T_Test"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_T_Test">[docs]</a>    <span class="k">def</span> <span class="nf">get_T_Test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [metrisch] - [kategorisch]\n</span>
<span class="sd">        Stellt die unterschiedlichen stat. Abhängigkeiten mit Mittelwert und Standardabweichung visuell dar</span>
<span class="sd">        @self.classification_column: Nur zwei Ausprägungen</span>
<span class="sd">        @return [Variable,p-Wert,t-wert,mü-gut, sigma-gut, mü-schlecht, sigma-schlecht]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;|                     T-Test                     |&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------------------------&quot;</span><span class="p">)</span>
        
        <span class="n">P_Wert</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span>
        <span class="n">subset_good</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">]</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">]</span>
        <span class="n">subset_bad</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">]</span><span class="o">&gt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="n">testvar</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;int64&quot;</span> <span class="ow">or</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;float64&quot;</span><span class="p">:</span>
                <span class="n">tval</span><span class="p">,</span><span class="n">pval</span><span class="o">=</span><span class="n">ttest_ind</span><span class="p">(</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">],</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">testvar</span><span class="p">,</span><span class="s2">&quot;-&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">t =&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">tval</span><span class="p">)),</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">p =&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pval</span><span class="p">),</span><span class="n">pval</span><span class="p">)</span>
                
                
                
                <span class="n">figure</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
                <span class="n">heights</span><span class="o">=</span><span class="p">[</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()]</span>
                <span class="n">stds</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">subset_good</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span><span class="n">subset_bad</span><span class="p">[</span><span class="n">testvar</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()]]</span>
                
                <span class="n">P_Wert</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">testvar</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">tval</span><span class="p">,</span><span class="n">heights</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">heights</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;T-Test&quot;</span><span class="p">))</span>
                
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">,</span><span class="s2">&quot;: &quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03bc</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> &quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">heights</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03C3</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> </span><span class="se">\u00B1</span><span class="s2">&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">,</span><span class="s2">&quot;: &quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03bc</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> &quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">heights</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="sa">u</span><span class="s2">&quot;</span><span class="se">\u03C3</span><span class="s2"> </span><span class="se">\u2248</span><span class="s2"> </span><span class="se">\u00B1</span><span class="s2">&quot;</span><span class="p">,</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>      
                <span class="n">axis</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)),</span><span class="n">height</span><span class="o">=</span><span class="n">heights</span><span class="p">,</span><span class="n">tick_label</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">good</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bad</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span><span class="n">yerr</span><span class="o">=</span><span class="n">stds</span><span class="p">,</span><span class="n">ecolor</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span><span class="n">capsize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">testvar</span><span class="si">}</span><span class="s2"> vs. </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Durchschnitt </span><span class="si">{</span><span class="n">testvar</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span>
                <span class="n">axis</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">);</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">P_Wert</span></div>
    
    
<div class="viewcode-block" id="DataVisAnalyse.get_all"><a class="viewcode-back" href="../../datawhispers.html#datawhispers.datavis.DataVisAnalyse.get_all">[docs]</a>    <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Eine rundumanalyse eines Datensatzes in statistischer Form</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   --------------------------------------------------&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   |                     Analyse                    |&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;                                   --------------------------------------------------&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_most_relevant</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dfStats</span> <span class="o">=</span> <span class="n">res</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_corr_table</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfStats</span><span class="o">.</span><span class="n">Name</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_chi2</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">dfT_Test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dfStats</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">classification_column</span><span class="p">]]</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">get_T_Test</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">dfT_Test</span><span class="p">)</span></div></div>
        
        
        
            
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">DataWhispers</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">DataWhispers Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code_example.html">Code example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">datawhispers</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, German Paul.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>